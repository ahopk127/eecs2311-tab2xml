plugins {
	id 'application'
	id 'antlr'
}

repositories {
	mavenLocal()
    mavenCentral()
}

dependencies {
    // Use JUnit test framework
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.7.0'
    // add the 'params' API for more functionality
    testImplementation 'org.junit.jupiter:junit-jupiter-params:5.7.0'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.7.0'
	implementation "org.antlr:antlr4:4.9.1"
	compile "org.antlr:antlr4-runtime:4.9.1"
}

generateGrammarSource {
	maxHeapSize = "64ms"
	doLast {
		println "copy grammar files to main directory"
		copy {
			from "${buildDir}/antlr"
			into "generated/main/java/antlr"
		}
	}
}

clean.doLast {
	file('generated').deleteDir()
}

test {
  useJUnitPlatform()
  testLogging {
    events 'passed', 'skipped', 'failed'
  }
}

run {
}

mainClassName = 'tab2xml.Main'